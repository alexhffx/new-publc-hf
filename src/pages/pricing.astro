---
import PageLayout from '../layouts/PageLayout.astro';
import Hero from '../components/Hero.astro';
import CTASection from '../components/CTASection.astro';

/* ── Platform plans ───────────────────────────────────────── */
const plans = [
  {
    name: 'Starter',
    price: '£99',
    period: '/mo',
    annual: '£950/yr',
    description: 'For businesses starting to manage international payments and FX.',
    cta: { label: 'Start free trial', href: 'https://app.hedgeflows.com/signup' },
    highlighted: false,
    features: [
      'Global payment account',
      'Multi-currency payment automation',
      'FX & cash management',
      'Market-leading FX rates',
      '100 local payments included free',
      'Low SWIFT payment fees',
    ],
  },
  {
    name: 'Scaler',
    price: '£499',
    period: '/mo',
    annual: '£4,800/yr',
    description: 'For growing international businesses with multiple entities.',
    cta: { label: 'Book a demo', href: '/treasury-health-check' },
    highlighted: true,
    features: [
      'Everything in Starter, plus:',
      'Multi-entity capability (3 included)',
      'Risk management co-pilot',
      'Bank account management',
      'Cashflow planning',
      'Error & fraud detection',
      'Public API access',
    ],
  },
  {
    name: 'Enterprise',
    price: 'Custom',
    period: '',
    annual: '',
    description: 'For complex organisations needing a full treasury management system.',
    cta: { label: 'Schedule a consultation', href: '/treasury-health-check' },
    highlighted: false,
    features: [
      'Everything in Scaler, plus:',
      'HedgeFlows TMS',
      'Custom ERP integrations',
      'Salesforce / HubSpot integrations',
      'Power BI integration',
      'Working capital management',
      'Hedge accounting',
    ],
  },
];

/* ── Comparison rows ──────────────────────────────────────── */
const comparison = [
  { item: 'FX margin', hedgeflows: 'From 0.25%', bank: '0.5% – 2%+' },
  { item: 'Local payments', hedgeflows: 'Free (100/mo)', bank: '£0.20 – £1.50 each' },
  { item: 'SWIFT payments', hedgeflows: 'Low fixed fee', bank: '£15 – £40 each' },
  { item: 'Onboarding', hedgeflows: 'Free', bank: '£2k – £10k setup' },
  { item: 'Accounting integration', hedgeflows: 'Included', bank: 'Extra cost / manual' },
  { item: 'Dedicated support', hedgeflows: 'Included', bank: 'Premium tier only' },
];
---

<PageLayout
  title="Pricing | HedgeFlows"
  description="Transparent pricing for HedgeFlows platform and advisory services. Platform plans from £99/mo with market-leading FX rates. Treasury advisory tailored to your needs."
>
  <Hero
    title="Simple, transparent pricing"
    subtitle="Platform plans with clear pricing and no hidden FX margins. Treasury advisory tailored to your business — book a call to discuss."
    primaryCta={{ label: 'Book a Treasury Review', href: '/treasury-health-check' }}
  />

  {/* ── Advisory banner ──────────────────────────────────── */}
  <section class="py-0">
    <div class="container-content max-w-5xl mx-auto">
      <div class="bg-gradient-to-br from-brand-green-pale via-brand-green-pale/60 to-white rounded-2xl p-8 md:p-10 border border-brand-green/10 flex flex-col md:flex-row items-center gap-6 md:gap-10">
        <div class="flex-1">
          <h2 class="text-[1.25rem] md:text-[1.5rem] font-bold text-text-heading mb-2">Treasury Advisory</h2>
          <p class="text-[1rem] text-text-body leading-relaxed">
            Expert guidance on FX risk, cash management, banking, and working capital — from a team with 40+ years of institutional experience. We tailor our advisory to your business, so pricing depends on your needs and complexity.
          </p>
        </div>
        <a
          href="/treasury-health-check"
          class="btn-primary text-[0.9375rem] px-6 py-3 whitespace-nowrap flex-shrink-0"
        >
          Let's talk
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  {/* ── Platform plans ───────────────────────────────────── */}
  <section class="section-padding">
    <div class="container-content">
      <div class="text-center mb-14">
        <h2 class="section-heading">Platform plans</h2>
        <p class="section-subheading mx-auto">
          Payments, FX, and cash management — all in one place
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8 max-w-5xl mx-auto">
        {plans.map((plan) => (
          <div class:list={[
            'rounded-2xl p-8 flex flex-col',
            plan.highlighted
              ? 'bg-white border-2 border-brand-green shadow-[0_4px_24px_rgba(3,148,100,0.12)] relative'
              : 'bg-white border border-gray-200 shadow-[0_1px_3px_rgba(0,0,0,0.04)]',
          ]}>
            {plan.highlighted && (
              <span class="absolute -top-3.5 left-1/2 -translate-x-1/2 bg-brand-green text-white text-[0.75rem] font-bold uppercase tracking-wider px-4 py-1 rounded-full">
                Most popular
              </span>
            )}
            <h3 class="text-[1.25rem] font-bold text-text-heading">{plan.name}</h3>
            <div class="mt-4 mb-2">
              <span class="text-[2.5rem] font-bold text-text-heading leading-none">{plan.price}</span>
              {plan.period && (
                <span class="text-[1rem] text-text-muted ml-1">{plan.period}</span>
              )}
            </div>
            {plan.annual && (
              <p class="text-[0.8125rem] text-text-muted mb-4">or {plan.annual} (save ~20%)</p>
            )}
            <p class="text-[0.9375rem] text-text-body leading-relaxed mb-6">{plan.description}</p>
            <a
              href={plan.cta.href}
              class:list={[
                'inline-flex items-center justify-center gap-2 font-semibold text-[0.9375rem] px-6 py-3 rounded-full transition-all duration-200 mb-8',
                plan.highlighted
                  ? 'bg-brand-green text-white hover:bg-brand-green-dark shadow-sm hover:shadow-md'
                  : 'bg-white text-brand-green border-2 border-brand-green hover:bg-brand-green hover:text-white',
              ]}
            >
              {plan.cta.label}
            </a>
            <ul class="space-y-3 mt-auto">
              {plan.features.map((feature) => (
                <li class="flex items-start gap-2.5 text-[0.875rem] text-text-body">
                  {feature.includes('Everything in') ? (
                    <span class="text-[0.875rem] font-semibold text-text-heading">{feature}</span>
                  ) : (
                    <>
                      <svg class="w-4 h-4 text-brand-green flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                      </svg>
                      <span>{feature}</span>
                    </>
                  )}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
      <p class="text-center text-[0.875rem] text-text-muted mt-8">
        All plans include market-leading FX rates, free onboarding, and dedicated support. Annual billing saves ~20%.
      </p>
    </div>
  </section>

  {/* ── Comparison table ─────────────────────────────────── */}
  <section class="section-padding bg-[#F8FAFB]" id="compare">
    <div class="container-content max-w-3xl mx-auto">
      <div class="text-center mb-14">
        <h2 class="section-heading">HedgeFlows vs. your bank</h2>
        <p class="section-subheading mx-auto">
          See what you're really paying — and what you could save
        </p>
      </div>
      <div class="rounded-2xl border border-gray-200 overflow-hidden shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
        <table class="w-full text-left">
          <thead>
            <tr class="bg-white">
              <th class="px-6 py-4 text-[0.8125rem] font-semibold text-text-heading uppercase tracking-wider"></th>
              <th class="px-6 py-4 text-[0.8125rem] font-semibold text-brand-green uppercase tracking-wider">HedgeFlows</th>
              <th class="px-6 py-4 text-[0.8125rem] font-semibold text-text-muted uppercase tracking-wider">Typical bank</th>
            </tr>
          </thead>
          <tbody>
            {comparison.map((row, i) => (
              <tr class:list={[i % 2 === 0 ? 'bg-[#F8FAFB]' : 'bg-white']}>
                <td class="px-6 py-4 text-[0.9375rem] font-medium text-text-heading">{row.item}</td>
                <td class="px-6 py-4 text-[0.9375rem] text-brand-green font-semibold">{row.hedgeflows}</td>
                <td class="px-6 py-4 text-[0.9375rem] text-text-muted">{row.bank}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
      <p class="text-center text-[0.8125rem] text-text-muted mt-6">
        Exact savings depend on your FX volume, currencies, and current provider. Book a treasury review for a personalised analysis.
      </p>
    </div>
  </section>

  {/* ── FAQ ───────────────────────────────────────────────── */}
  <section class="section-padding">
    <div class="container-content max-w-3xl mx-auto">
      <h2 class="section-heading text-center mb-12">Common questions</h2>
      <div class="space-y-6">
        <details class="group bg-white rounded-xl border border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
          <summary class="flex items-center justify-between px-6 py-5 cursor-pointer list-none">
            <span class="text-[1rem] font-semibold text-text-heading">How does advisory pricing work?</span>
            <svg class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5 text-[0.9375rem] text-text-body leading-relaxed">
            Our advisory is tailored to your business — the scope, complexity, and the services you need. We'll discuss pricing during your treasury review so it's based on your actual situation, not a one-size-fits-all number.
          </div>
        </details>

        <details class="group bg-white rounded-xl border border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
          <summary class="flex items-center justify-between px-6 py-5 cursor-pointer list-none">
            <span class="text-[1rem] font-semibold text-text-heading">Do I need advisory to use the platform?</span>
            <svg class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5 text-[0.9375rem] text-text-body leading-relaxed">
            No — you can use the platform on its own. But most clients find that starting with a treasury review helps them get the most value, because we identify exactly where you're overpaying and build a strategy before you start executing.
          </div>
        </details>

        <details class="group bg-white rounded-xl border border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
          <summary class="flex items-center justify-between px-6 py-5 cursor-pointer list-none">
            <span class="text-[1rem] font-semibold text-text-heading">What FX rates do you offer?</span>
            <svg class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5 text-[0.9375rem] text-text-body leading-relaxed">
            We offer market-leading FX rates with transparent margins from 0.25%. Unlike most banks who hide their margin in the rate, we show you the mid-market rate and our spread separately — so you always know exactly what you're paying.
          </div>
        </details>

        <details class="group bg-white rounded-xl border border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
          <summary class="flex items-center justify-between px-6 py-5 cursor-pointer list-none">
            <span class="text-[1rem] font-semibold text-text-heading">How does the free treasury review work?</span>
            <svg class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5 text-[0.9375rem] text-text-body leading-relaxed">
            It's a free 30-minute call. We map your current setup — currencies, volumes, banking relationships, and processes — then show you exactly where you're overpaying and what we'd recommend. No commitment, no sales pitch.
          </div>
        </details>

        <details class="group bg-white rounded-xl border border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]">
          <summary class="flex items-center justify-between px-6 py-5 cursor-pointer list-none">
            <span class="text-[1rem] font-semibold text-text-heading">Are you regulated?</span>
            <svg class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5 text-[0.9375rem] text-text-body leading-relaxed">
            Yes. HedgeFlows Ltd is authorised and regulated by the Financial Conduct Authority as an Authorised Payment Institution (Firm Reference Number: 1008699). Your funds are safeguarded in line with FCA requirements.
          </div>
        </details>
      </div>
    </div>
  </section>

  <CTASection
    headline="Not sure which plan is right for you?"
    primaryCta={{ label: 'Book a Free Treasury Review', href: '/treasury-health-check' }}
    secondaryCta={{ label: 'Learn about our advisory', href: '/advisory' }}
  />
</PageLayout>
