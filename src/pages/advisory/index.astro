---
import PageLayout from '../../layouts/PageLayout.astro';
import Hero from '../../components/Hero.astro';
import AdvisoryScene from '../../components/hero/AdvisoryScene.astro';
import TrustBar from '../../components/TrustBar.astro';
import { staticClientLogos } from '../../data/clientLogos';
import StepProcess from '../../components/StepProcess.astro';
import CTASection from '../../components/CTASection.astro';

const clientTestimonials = [
  {
    quote: "The Hedgeflows team have been instrumental in helping us to develop our treasury strategy and guiding us through its implementation. We really appreciated that they did not try to 'sell' us their platform or services over other providers, but instead helped us find the best solution for our bespoke needs.",
    name: 'Harry Young',
    role: 'Global Finance Director',
    company: 'Journey',
  },
  {
    quote: "Things you don't want to be thinking about whilst running a fast growing startup… treasury management and hedging. If you're a CFO and just raised £5m, what you do with it is going to make a huge difference — getting it right could make the difference between hiring that extra engineer or sales person.",
    name: 'Ed Keelan',
    role: '',
    company: 'Octopus Ventures',
  },
  {
    quote: "We switched to HedgeFlows from Wise for international payment runs, and we haven't looked back. The Xero integration works flawlessly, taking care of reconciliations and saving us hours every week.",
    name: 'Michal Jahns',
    role: 'Finance Manager',
    company: 'E-commerce company',
  },
  {
    quote: "We had been spending incredible amounts on bank fees for foreign payments. HedgeFlows has already saved us hundreds in just a couple of transactions. The system is incredibly easy to use.",
    name: 'Sophie Dale',
    role: 'Finance Manager',
    company: 'International business',
  },
];

/* ─────────────────────────── Icon SVG paths ─────────────────────────── */
const iconPaths: Record<string, string> = {
  coins: 'M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125',
  shield: 'M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z',
  bank: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z',
  'trending-up': 'M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941',
  bolt: 'M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z',
};

/* ─────────────────────────── Problem stats ─────────────────────────── */
const problemStats = [
  { value: '0.5–2%', label: 'What most banks charge on FX, hidden in the rate' },
  { value: '£85k', label: 'FSCS protection limit — is your cash above this at one bank?' },
  { value: '3–5 days', label: 'What finance teams spend each month on manual international payments' },
];

/* ─────────────────────────── Five pillars ─────────────────────────── */
const pillars = [
  {
    icon: 'coins',
    title: 'Cash Management',
    stat: 'Optimise yield',
    description: 'Policies, controls, and reporting that satisfy investors and auditors — while your cash works harder.',
    href: '/advisory/cash-management',
  },
  {
    icon: 'shield',
    title: 'FX Risk Management',
    stat: 'Reduce risk',
    description: 'Know your exposure. Hedge deliberately. Stop currency moves eating your margins.',
    href: '/advisory/fx-risk-management',
  },
  {
    icon: 'bank',
    title: 'Bank Management',
    stat: 'Cut costs',
    description: 'The right relationships, benchmarked pricing, and the leverage of knowing your options.',
    href: '/advisory/bank-management',
  },
  {
    icon: 'trending-up',
    title: 'Working Capital',
    stat: 'Fuel growth',
    description: 'Growth funding beyond your bank\'s overdraft. Independent advice on the right facility.',
    href: '/advisory/working-capital',
  },
  {
    icon: 'bolt',
    title: 'Digitalisation',
    stat: 'Save time',
    description: 'Automated payments, audit trails, and real-time reporting. Replace the spreadsheets.',
    href: '/advisory/digitalisation',
  },
];

/* ─────────────────────────── How it starts ─────────────────────────── */
const steps = [
  { number: 1, title: 'Treasury Review', description: '30-minute conversation. We map your setup and identify what\'s costing you.' },
  { number: 2, title: 'Recommendations', description: 'Clear priorities — what to fix first, what can wait, and what it\'s worth.' },
  { number: 3, title: 'Implementation', description: 'We help you act, starting with whatever\'s most urgent. At your pace.' },
];

---

<PageLayout
  title="Treasury Advisory | HedgeFlows"
  description="Expert treasury advisory for internationally trading SMEs. Cash management, FX risk, banking, working capital, and digitalisation — without hiring a treasurer."
>
  <!-- Hero -->
  <Hero
    title="Most growing businesses don't have a treasury team. We are yours."
    subtitle="Expert advisory and an FCA-regulated platform, combined. We handle cash management, FX risk, banking, working capital, and treasury operations — so your finance team can focus on the business."
    primaryCta={{ label: 'Book a Treasury Review', href: '/treasury-health-check' }}
    secondaryCta={{ label: 'See the Platform', href: '/platform' }}
  >
    <AdvisoryScene
      slot="scene"
      advisorName="Sarah Chen"
      advisorRole="Treasury Advisor"
      advisorInitials="SC"
      message="Your EUR exposure is up 12% this quarter — let's review your hedging strategy."
      metricLabel="Cost saved"
      metricValue="£47K"
      metricSub="Last 12 months"
    />
  </Hero>

  <!-- Trust Bar -->
  <TrustBar label="Trusted by international businesses:" logos={staticClientLogos} slider={true} />

  <!-- Problem Stats -->
  <section class="section-padding-sm bg-white">
    <div class="container-content">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {problemStats.map((stat) => (
          <div class="bg-[#F8FAFB] rounded-2xl border border-gray-100 p-6 text-center">
            <p class="text-[2rem] md:text-[2.5rem] font-bold text-brand-green leading-none mb-2">{stat.value}</p>
            <p class="text-[0.875rem] text-text-body leading-relaxed">{stat.label}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- The Gap -->
  <section class="section-padding bg-white">
    <div class="container-content">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="section-heading">The mid-market treasury gap</h2>
        <p class="text-[1.0625rem] text-text-body leading-relaxed mb-6">
          Large corporates have treasury teams. Your business faces the same challenges — multiple currencies, board reporting, investor requirements — but without the dedicated function.
        </p>
        <p class="text-[1.0625rem] text-text-body leading-relaxed mb-8">
          We close it. A fractional treasury function: 40+ years of institutional expertise with a platform that automates execution. Transparent pricing from the start — no hidden FX markups, no surprises. Just clear, upfront costs designed for scaleups and mid-market businesses.
        </p>
      </div>
    </div>
  </section>

  <!-- Five Pillars -->
  <section class="section-padding bg-[#F8FAFB]">
    <div class="container-content">
      <div class="text-center mb-14">
        <h2 class="section-heading">Five ways we help</h2>
        <p class="section-subheading mx-auto">
          Each pillar works standalone or together — a modular treasury function for your business.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {pillars.map((pillar) => (
          <a
            href={pillar.href}
            class="feature-card group relative overflow-hidden rounded-2xl border border-gray-100
                   shadow-[0_1px_3px_rgba(0,0,0,0.04),0_6px_24px_rgba(0,0,0,0.04)]
                   hover:shadow-[0_4px_12px_rgba(0,0,0,0.06),0_12px_40px_rgba(0,0,0,0.06)]
                   hover:border-brand-green/20 transition-all duration-300 flex flex-col"
          >
            {/* Gradient accent header */}
            <div class="feature-card__header relative px-8 pt-7 pb-5">
              <div class="relative z-10 flex items-center justify-between">
                <div class="w-14 h-14 rounded-2xl bg-white/80 backdrop-blur-sm border border-white/60 shadow-sm flex items-center justify-center flex-shrink-0">
                  <svg class="w-7 h-7 text-brand-green" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d={iconPaths[pillar.icon]} />
                  </svg>
                </div>
                <span class="text-[0.75rem] font-semibold text-brand-green bg-white/80 backdrop-blur-sm border border-white/60 px-3 py-1.5 rounded-full shadow-sm">
                  {pillar.stat}
                </span>
              </div>
            </div>

            {/* Content */}
            <div class="px-8 pt-5 pb-8 flex-1 flex flex-col bg-white">
              <h3 class="text-[1.25rem] font-bold text-text-heading mb-3 group-hover:text-brand-green transition-colors duration-200">
                {pillar.title}
              </h3>

              <p class="text-[0.9375rem] text-text-body leading-relaxed flex-1">
                {pillar.description}
              </p>

              <span class="inline-flex items-center gap-1.5 text-brand-green font-semibold text-[0.875rem] mt-6 group-hover:gap-2.5 transition-all duration-200">
                Learn more
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- How It Starts -->
  <section class="section-padding bg-white">
    <div class="container-content">
      <div class="text-center mb-14">
        <h2 class="section-heading">How advisory begins</h2>
        <p class="section-subheading mx-auto">
          No long sales process. No commitment until you see the value.
        </p>
      </div>
      <StepProcess steps={steps} />
    </div>
  </section>

  <!-- Client Testimonials -->
  <section class="section-padding bg-[#F8FAFB]">
    <div class="container-content">
      <div class="text-center mb-14">
        <h2 class="section-heading">What clients say</h2>
      </div>
      <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
        {clientTestimonials.map((t) => (
          <div class="bg-white rounded-2xl border border-gray-100 p-8 shadow-sm flex flex-col">
            <svg class="w-8 h-8 text-brand-green/20 mb-4 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10H14.017zM0 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151C7.546 6.068 5.983 8.789 5.983 11H10v10H0z" />
            </svg>
            <p class="text-[0.9375rem] text-text-body leading-relaxed flex-1 mb-6">
              {t.quote}
            </p>
            <div class="border-t border-gray-100 pt-4">
              <p class="text-[0.9375rem] font-semibold text-text-heading">{t.name}</p>
              <p class="text-[0.8125rem] text-text-muted">{t.role ? `${t.role}, ${t.company}` : t.company}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Credibility Strip -->
  <section class="section-padding-sm bg-white border-y border-gray-100">
    <div class="container-content">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-0 md:divide-x md:divide-gray-200">
        <!-- TMI Awards -->
        <div class="flex items-center gap-4 md:justify-center md:px-8">
          <img
            src="/assets/logos/clients/tmi.jpg"
            alt="TMI Awards 2025"
            class="w-16 h-16 rounded-2xl object-cover flex-shrink-0"
          />
          <div>
            <p class="font-semibold text-text-heading text-[0.9375rem]">Best Risk Management</p>
            <p class="text-[0.8125rem] text-text-muted">TMI Awards 2025</p>
          </div>
        </div>
        <!-- TTP Awards -->
        <div class="flex items-center gap-4 md:justify-center md:px-8">
          <img
            src="/assets/logos/clients/ttp.jpg"
            alt="TTP Awards 2026"
            class="w-16 h-16 rounded-2xl object-cover flex-shrink-0"
          />
          <div>
            <p class="font-semibold text-text-heading text-[0.9375rem]">SME Inclusion Initiative</p>
            <p class="text-[0.8125rem] text-text-muted">TTP Awards 2026</p>
          </div>
        </div>
        <!-- FCA -->
        <div class="flex items-center gap-4 md:justify-center md:px-8">
          <div class="w-16 h-16 bg-brand-green-pale rounded-2xl flex items-center justify-center flex-shrink-0">
            <svg class="w-8 h-8 text-brand-green" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
            </svg>
          </div>
          <div>
            <p class="font-semibold text-text-heading text-[0.9375rem]">FCA Regulated</p>
            <p class="text-[0.8125rem] text-text-muted">Firm Reference Number: 1008699</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <CTASection
    headline="Ready to close the treasury gap?"
    primaryCta={{ label: 'Book a Treasury Review', href: '/treasury-health-check' }}
    secondaryCta={{ label: 'See the Platform', href: '/platform' }}
  />
</PageLayout>

<style>
  .feature-card__header {
    background:
      linear-gradient(160deg, #F0FAF5 0%, #E4F5EC 50%, #F5FBF8 100%);
  }

  .feature-card__header::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: radial-gradient(circle, rgba(3, 132, 88, 0.07) 1px, transparent 1px);
    background-size: 16px 16px;
    pointer-events: none;
  }

  .feature-card__header::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 100% 0%, rgba(3, 132, 88, 0.06) 0%, transparent 60%),
      radial-gradient(ellipse at 0% 100%, rgba(3, 132, 88, 0.04) 0%, transparent 60%);
    pointer-events: none;
  }

  .feature-card:hover .feature-card__header {
    background:
      linear-gradient(160deg, #E4F5EC 0%, #D6F0E2 50%, #EBF8F2 100%);
  }
</style>
