---
/**
 * PartnersScene â€” Two overlapping cards (HedgeFlows + Partner) connected visually,
 * plus a metric card.
 */
interface Props {
  partnerType?: string;
  partnerIcon?: string;
  metricValue?: string;
  metricLabel?: string;
}

const {
  partnerType = 'Your Firm',
  partnerIcon,
  metricValue = 'Up to 5x',
  metricLabel = 'cheaper FX for your clients',
} = Astro.props;

const partnerIcons: Record<string, string> = {
  'Your Firm': 'M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z',
  'Accountants': 'M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V13.5zm0 2.25h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V18zm2.498-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zm0 2.25h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V18zm2.504-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zm0 2.25h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V18zm2.498-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zM8.25 6h7.5v2.25h-7.5V6zM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 002.25 2.25h10.5a2.25 2.25 0 002.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0012 2.25z',
  'Financial Institutions': 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z',
  'Advisors': 'M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605',
};

const iconD = partnerIcon || partnerIcons[partnerType] || partnerIcons['Your Firm'];
---

<div class="partners-scene" aria-hidden="true">
  <!-- HedgeFlows card -->
  <div class="partners-scene__hf glass-card scene-fade scene-float" style="--delay: 0.2s; --float-dur: 6s">
    <img src="/favicon.png" alt="" class="partners-scene__logo" />
    <p class="partners-scene__card-label">HedgeFlows</p>
    <p class="partners-scene__card-sub">Treasury platform</p>
  </div>

  <!-- Connector arrow -->
  <div class="partners-scene__connector scene-fade" style="--delay: 0.4s">
    <svg width="40" height="20" viewBox="0 0 40 20" fill="none">
      <path d="M0 10h32M28 4l6 6-6 6" stroke="#038458" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.4" />
    </svg>
  </div>

  <!-- Partner card -->
  <div class="partners-scene__partner glass-card scene-fade scene-float" style="--delay: 0.4s; --float-dur: 7s">
    <div class="partners-scene__partner-icon-wrap">
      <svg class="partners-scene__partner-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d={iconD} />
      </svg>
    </div>
    <p class="partners-scene__card-label">{partnerType}</p>
    <p class="partners-scene__card-sub">Your clients</p>
  </div>

  <!-- Metric card -->
  <div class="partners-scene__metric glass-card scene-fade scene-float" style="--delay: 0.7s; --float-dur: 5.5s">
    <p class="partners-scene__metric-value">{metricValue}</p>
    <p class="partners-scene__metric-label">{metricLabel}</p>
  </div>
</div>

<style>
  .glass-card {
    background: rgba(255, 255, 255, 0.72);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.9);
    border-radius: 16px;
    box-shadow:
      0 8px 40px rgba(0, 0, 0, 0.08),
      0 1px 0 rgba(255, 255, 255, 0.8) inset;
  }

  .scene-fade {
    opacity: 0;
    animation: sceneFadeUp 0.8s ease forwards;
    animation-delay: var(--delay, 0.2s);
  }

  .scene-float {
    animation: sceneFadeUp 0.8s ease forwards, sceneFloat var(--float-dur, 6s) ease-in-out infinite;
    animation-delay: var(--delay, 0.2s), calc(var(--delay, 0.2s) + 0.8s);
  }

  .partners-scene {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.75rem;
  }

  @media (min-width: 1024px) {
    .partners-scene {
      position: relative;
      min-height: 350px;
      display: block;
    }

    .partners-scene__hf {
      position: absolute;
      top: 20px;
      right: 200px;
    }

    .partners-scene__connector {
      position: absolute;
      top: 80px;
      right: 168px;
    }

    .partners-scene__partner {
      position: absolute;
      top: 20px;
      right: 0;
    }

    .partners-scene__metric {
      position: absolute;
      bottom: 40px;
      right: 60px;
    }
  }

  .partners-scene__hf,
  .partners-scene__partner {
    padding: 1.25rem;
    text-align: center;
    min-width: 150px;
  }

  .partners-scene__logo {
    width: 32px;
    height: 32px;
    margin: 0 auto 0.5rem;
  }

  .partners-scene__partner-icon-wrap {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #E8F8F0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 0.5rem;
  }

  .partners-scene__partner-icon {
    width: 18px;
    height: 18px;
    color: #038458;
  }

  .partners-scene__card-label {
    font-size: 0.8125rem;
    font-weight: 600;
    color: #343A40;
  }

  .partners-scene__card-sub {
    font-size: 0.6875rem;
    color: #6B7280;
    margin-top: 0.125rem;
  }

  .partners-scene__connector {
    display: none;
  }

  @media (min-width: 1024px) {
    .partners-scene__connector {
      display: block;
    }
  }

  .partners-scene__metric {
    padding: 1rem 1.25rem;
  }

  .partners-scene__metric-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #038458;
    line-height: 1.2;
  }

  .partners-scene__metric-label {
    font-size: 0.75rem;
    color: #6B7280;
    margin-top: 0.125rem;
  }

  @keyframes sceneFadeUp {
    from { opacity: 0; transform: translateY(28px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes sceneFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }
</style>
