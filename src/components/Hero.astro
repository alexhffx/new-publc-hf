---
import HeroBackground from './HeroBackground.astro';

interface Props {
  title: string;
  subtitle?: string;
  primaryCta?: {
    label: string;
    href: string;
  };
  secondaryCta?: {
    label: string;
    href: string;
  };
  centered?: boolean;
  bgClass?: string;
  large?: boolean;
}

const {
  title,
  subtitle,
  primaryCta,
  secondaryCta,
  centered = true,
  bgClass = '',
  large = false,
} = Astro.props;

const hasScene = Astro.slots.has('scene');
---

<section class:list={[
  'hero-section relative overflow-hidden',
  large ? 'pt-20 pb-28 md:pt-28 md:pb-36 lg:pt-32 lg:pb-44' : 'pt-16 pb-20 md:pt-20 md:pb-28',
  bgClass,
]}>
  <HeroBackground />

  <div class:list={[
    'container-content relative z-10',
    hasScene ? 'hero-section--with-scene' : '',
    { 'text-center': centered && !hasScene },
  ]}>
    <!-- Copy column -->
    <div class:list={[hasScene ? 'hero-section__copy' : '']}>
      <h1 class:list={[
        'text-text-heading leading-[1.1] tracking-tight font-bold hero-section__title',
        large ? 'text-[2.25rem] md:text-[3.25rem] lg:text-[3.75rem]' : 'text-[2rem] md:text-[2.75rem] lg:text-[3rem]',
        centered && !hasScene ? 'max-w-4xl mx-auto' : 'max-w-3xl',
      ]}>
        {title}
      </h1>

      {subtitle && (
        <p class:list={[
          'mt-6 md:mt-8 text-[1.125rem] md:text-[1.25rem] text-text-body leading-relaxed',
          centered && !hasScene ? 'max-w-2xl mx-auto' : 'max-w-2xl',
        ]}>
          {subtitle}
        </p>
      )}

      {(primaryCta || secondaryCta) && (
        <div class:list={[
          'mt-10 md:mt-12 flex flex-col sm:flex-row flex-wrap gap-4',
          { 'justify-center items-center': centered && !hasScene },
        ]}>
          {primaryCta && (
            <a href={primaryCta.href} class="btn-primary text-[1.0625rem] px-8 py-4">
              {primaryCta.label}
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </a>
          )}
          {secondaryCta && (
            <a href={secondaryCta.href} class="btn-secondary text-[1.0625rem] px-8 py-4">
              {secondaryCta.label}
            </a>
          )}
        </div>
      )}
    </div>

    <!-- Scene column (only rendered if slot is provided) -->
    {hasScene && (
      <div class="hero-section__scene">
        <slot name="scene" />
      </div>
    )}
  </div>
</section>

<style>
  /* Two-column layout when scene is present */
  .hero-section__copy {
    opacity: 0;
    animation: heroFadeUp 0.8s ease forwards;
  }

  @media (min-width: 1024px) {
    .hero-section--with-scene {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }
  }

  .hero-section__scene {
    position: relative;
    margin-top: 2.5rem;
  }

  @media (min-width: 1024px) {
    .hero-section__scene {
      margin-top: 0;
      min-height: 400px;
    }
  }

  @keyframes heroFadeUp {
    from {
      opacity: 0;
      transform: translateY(28px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
